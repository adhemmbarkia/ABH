<p-toast />
<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [closeOnEscape]="true"
  [closable]="false"
  [dismissableMask]="true"
  [draggable]="false"
  [resizable]="false"
  styleClass="company-modal"
  maskStyleClass="backdrop-blur-lg"
  [breakpoints]="{
    '1200px': '70vw',
    '992px': '80vw',
    '850px': '85vw',
    '768px': '90vw',
    '599px': '100vw'
  }"
  [style]="{ width: '70vw', maxWidth: '800px' }"
>
  <ng-template pTemplate="header">
    <div
      class="flex items-center w-full"
      [ngClass]="{ 'justify-end': !isMobile, 'justify-start': isMobile }"
    >
      <button
        *ngIf="!isMobile"
        pButton
        icon="pi pi-times"
        class="p-button-text"
        size="large"
        (click)="onHide()"
      ></button>
      <p-button
        *ngIf="isMobile"
        label="Back"
        icon="pi pi-arrow-left"
        variant="outlined"
        severity="contrast"
        (onClick)="onHide()"
      />
    </div>
  </ng-template>
  <form [formGroup]="companyForm">
    <div class="">
      <div class="flex flex-col gap-6">
        <!-- Company Information -->
        <div class="rounded-lg">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M22.25 21H20V3H20.75C20.9489 3 21.1397 2.92098 21.2803 2.78033C21.421 2.63968 21.5 2.44891 21.5 2.25C21.5 2.05109 21.421 1.86032 21.2803 1.71967C21.1397 1.57902 20.9489 1.5 20.75 1.5H4.25C4.05109 1.5 3.86032 1.57902 3.71967 1.71967C3.57902 1.86032 3.5 2.05109 3.5 2.25C3.5 2.44891 3.57902 2.63968 3.71967 2.78033C3.86032 2.92098 4.05109 3 4.25 3H5V21H2.75C2.55109 21 2.36032 21.079 2.21967 21.2197C2.07902 21.3603 2 21.5511 2 21.75C2 21.9489 2.07902 22.1397 2.21967 22.2803C2.36032 22.421 2.55109 22.5 2.75 22.5H22.25C22.4489 22.5 22.6397 22.421 22.7803 22.2803C22.921 22.1397 23 21.9489 23 21.75C23 21.5511 22.921 21.3603 22.7803 21.2197C22.6397 21.079 22.4489 21 22.25 21ZM6.5 3H18.5V21H15.5V17.25C15.5 17.0511 15.421 16.8603 15.2803 16.7197C15.1397 16.579 14.9489 16.5 14.75 16.5H10.25C10.0511 16.5 9.86032 16.579 9.71967 16.7197C9.57902 16.8603 9.5 17.0511 9.5 17.25V21H6.5V3ZM14 21H11V18H14V21ZM8.75 6C8.75 5.80109 8.82902 5.61032 8.96967 5.46967C9.11032 5.32902 9.30109 5.25 9.5 5.25H11C11.1989 5.25 11.3897 5.32902 11.5303 5.46967C11.671 5.61032 11.75 5.80109 11.75 6C11.75 6.19891 11.671 6.38968 11.5303 6.53033C11.3897 6.67098 11.1989 6.75 11 6.75H9.5C9.30109 6.75 9.11032 6.67098 8.96967 6.53033C8.82902 6.38968 8.75 6.19891 8.75 6ZM13.25 6C13.25 5.80109 13.329 5.61032 13.4697 5.46967C13.6103 5.32902 13.8011 5.25 14 5.25H15.5C15.6989 5.25 15.8897 5.32902 16.0303 5.46967C16.171 5.61032 16.25 5.80109 16.25 6C16.25 6.19891 16.171 6.38968 16.0303 6.53033C15.8897 6.67098 15.6989 6.75 15.5 6.75H14C13.8011 6.75 13.6103 6.67098 13.4697 6.53033C13.329 6.38968 13.25 6.19891 13.25 6ZM8.75 9.75C8.75 9.55109 8.82902 9.36032 8.96967 9.21967C9.11032 9.07902 9.30109 9 9.5 9H11C11.1989 9 11.3897 9.07902 11.5303 9.21967C11.671 9.36032 11.75 9.55109 11.75 9.75C11.75 9.94891 11.671 10.1397 11.5303 10.2803C11.3897 10.421 11.1989 10.5 11 10.5H9.5C9.30109 10.5 9.11032 10.421 8.96967 10.2803C8.82902 10.1397 8.75 9.94891 8.75 9.75ZM13.25 9.75C13.25 9.55109 13.329 9.36032 13.4697 9.21967C13.6103 9.07902 13.8011 9 14 9H15.5C15.6989 9 15.8897 9.07902 16.0303 9.21967C16.171 9.36032 16.25 9.55109 16.25 9.75C16.25 9.94891 16.171 10.1397 16.0303 10.2803C15.8897 10.421 15.6989 10.5 15.5 10.5H14C13.8011 10.5 13.6103 10.421 13.4697 10.2803C13.329 10.1397 13.25 9.94891 13.25 9.75ZM8.75 13.5C8.75 13.3011 8.82902 13.1103 8.96967 12.9697C9.11032 12.829 9.30109 12.75 9.5 12.75H11C11.1989 12.75 11.3897 12.829 11.5303 12.9697C11.671 13.1103 11.75 13.3011 11.75 13.5C11.75 13.6989 11.671 13.8897 11.5303 14.0303C11.3897 14.171 11.1989 14.25 11 14.25H9.5C9.30109 14.25 9.11032 14.171 8.96967 14.0303C8.82902 13.8897 8.75 13.6989 8.75 13.5ZM13.25 13.5C13.25 13.3011 13.329 13.1103 13.4697 12.9697C13.6103 12.829 13.8011 12.75 14 12.75H15.5C15.6989 12.75 15.8897 12.829 16.0303 12.9697C16.171 13.1103 16.25 13.3011 16.25 13.5C16.25 13.6989 16.171 13.8897 16.0303 14.0303C15.8897 14.171 15.6989 14.25 15.5 14.25H14C13.8011 14.25 13.6103 14.171 13.4697 14.0303C13.329 13.8897 13.25 13.6989 13.25 13.5Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.COMPANY_INFORMATION.COMPANY_INFORMATION"
                  | translate
              }}
            </h2>
          </div>
          <div class="grid grid-cols-1 md:gap-4 text-sm">
            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium" for="nameCompany">{{
                "VIEW_COMPANY.COMPANY_INFORMATION.COMPANY_NAME" | translate
              }}</label>
              <div class="flex items-center">
                <input
                  id="nameCompany"
                  type="text"
                  [value]=""
                  pInputText
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.controls['name'].invalid &&
                      companyForm.controls['name'].touched
                  }"
                  [placeholder]="
                    'ADD_EDIT_COMPANY.ENTER_THE_REGISTERED_COMPANY_NAME'
                      | translate
                  "
                  formControlName="name"
                />
              </div>
              <div class="flex items-center">
                <span
                  class="text-red-500 text-sm"
                  *ngIf="
                    companyForm.controls['name'].invalid &&
                    companyForm.controls['name'].touched
                  "
                >
                  <i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{ "ADD_EDIT_COMPANY.COMPANY_NAME_IS_REQUIRED" | translate }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Legal Information -->
        <div class="rounded-lg" formGroupName="legal_information">
          <div
            class="flex items-center gap-3 text-gray-900 mb-4 bg-primary bg-opacity-10 p-3"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M23.3113 10.9404L21.8113 9.4404C21.5569 9.18629 21.2197 9.03202 20.861 9.00569C20.5024 8.97936 20.1463 9.08273 19.8575 9.29696L15.2038 4.64321C15.4181 4.35453 15.5216 3.99847 15.4955 3.63986C15.4693 3.28126 15.3152 2.94398 15.0613 2.68946L13.5613 1.18946C13.422 1.05014 13.2566 0.939617 13.0746 0.864214C12.8926 0.78881 12.6975 0.75 12.5005 0.75C12.3035 0.75 12.1084 0.78881 11.9264 0.864214C11.7444 0.939617 11.579 1.05014 11.4397 1.18946L5.43971 7.18946C5.30038 7.32875 5.18987 7.49413 5.11446 7.67614C5.03906 7.85815 5.00025 8.05323 5.00025 8.25024C5.00025 8.44725 5.03906 8.64234 5.11446 8.82435C5.18987 9.00636 5.30038 9.17173 5.43971 9.31102L6.93971 10.811C7.19417 11.0647 7.53127 11.2187 7.88966 11.2448C8.24805 11.271 8.60392 11.1676 8.89252 10.9535L9.56471 11.6257L3.43533 17.7551C3.02812 18.2004 2.80838 18.7857 2.82188 19.389C2.83537 19.9923 3.08105 20.5672 3.50776 20.9939C3.93447 21.4206 4.50933 21.6663 5.11264 21.6798C5.71596 21.6933 6.30122 21.4735 6.74658 21.0663L12.875 14.937L13.5472 15.6082C13.3329 15.8969 13.2293 16.253 13.2555 16.6116C13.2816 16.9702 13.4357 17.3074 13.6897 17.562L15.1897 19.062C15.329 19.2013 15.4944 19.3118 15.6764 19.3872C15.8584 19.4626 16.0535 19.5014 16.2505 19.5014C16.4475 19.5014 16.6426 19.4626 16.8246 19.3872C17.0066 19.3118 17.172 19.2013 17.3113 19.062L23.3113 13.062C23.4506 12.9227 23.5611 12.7573 23.6365 12.5753C23.7119 12.3933 23.7507 12.1982 23.7507 12.0012C23.7507 11.8042 23.7119 11.6091 23.6365 11.4271C23.5611 11.2451 23.4506 11.0797 23.3113 10.9404ZM8.00002 9.75071L6.50002 8.25071L12.5 2.25071L14 3.75071L8.00002 9.75071ZM5.68627 20.0051C5.52818 20.1622 5.31433 20.2504 5.09143 20.2504C4.86852 20.2504 4.65467 20.1622 4.49658 20.0051C4.33972 19.847 4.25169 19.6334 4.25169 19.4107C4.25169 19.188 4.33972 18.9744 4.49658 18.8163L10.625 12.687L11.8147 13.8757L5.68627 20.0051ZM9.96877 9.90634L14.1556 5.71946L18.7813 10.3451L14.5953 14.532L9.96877 9.90634ZM16.25 18.0007L14.75 16.5007L15.125 16.1257L20.375 10.8757L20.75 10.5007L22.25 12.0007L16.25 18.0007Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.LEGAL_INFORMATION.LEGAL_INFORMATION" | translate
              }}
            </h2>
          </div>

          <div class="grid md:grid-cols-2 grid-cols-1 md:gap-4 text-sm">
            <!-- Legal Form  -->
            <!-- <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.LEGAL_INFORMATION.LEGAL_FORM" | translate
              }}</label>
              <div class="relative">
                <select
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400"
                  required="true"
                  formControlName="legal_form"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('legal_information.legal_form')
                        ?.invalid &&
                      companyForm.get('legal_information.legal_form')?.touched
                  }"
                >
                  <option value="" selected disabled>
                    {{ "ADD_EDIT_COMPANY.SELECT_YOUR_LEGAL_FORM" | translate }}
                  </option>
                  @for (legal_form of legalFormOptions; track $index) {
                  <option value="{{ legal_form.id }}">
                    {{ legal_form.name }}
                  </option>
                  }
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"
                >
                  <i class="pi pi-chevron-down"></i>
                </div>
              </div>
              <div class="flex items-center">
                <span
                  class="text-red-500 text-sm"
                  *ngIf="
                    companyForm.get('legal_information.legal_form')?.invalid &&
                    companyForm.get('legal_information.legal_form')?.touched
                  "
                >
                  <i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{ "ADD_EDIT_COMPANY.LEGAL_FORM_IS_REQUIRED" | translate }}
                </span>
              </div>
            </div> -->
            <!-- Legal Information -->

            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.LEGAL_INFORMATION.LEGAL_FORM" | translate
              }}</label>
              <div class="relative">
                <p-select 
                  [options]="legalFormOptions" 
                  
                  optionLabel="name" 
                  formControlName="legal_form"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('legal_information.legal_form')
                        ?.invalid &&
                      companyForm.get('legal_information.legal_form')?.touched
                  }"
                  placeholder="Select a legal form"
                  class="w-full !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none 
                  focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400">
                  
                  <ng-template pTemplate="selectedItem" let-selectedOption>
                    <div class="flex items-center justify-between">
                      <span>{{ selectedOption.name }}</span>
                    </div>
                  </ng-template>
                  
                  <ng-template let-item pTemplate="item">
                    <div class="flex items-center">
                      <div class="!flex !gap-1">
                        <p-button 
                          icon="pi pi-pencil" 
                          severity="success" 
                          text 
                          size="small"
                          (click)="openDialog('edit', item)"
                        />
                        <p-button 
                          icon="pi pi-trash" 
                          severity="danger" 
                          text 
                          size="small"
                          (click)="confirmDelete(item)"
                        />
                      </div>
                      <span class="flex-grow">{{ item.name }}</span>
                      
                    </div>
                  </ng-template>
                  <ng-template #footer>
                    <div class="p-3">
                        <p-button label="Add New" (click)="openDialog('add')" fluid severity="primary" text size="small" icon="pi pi-plus" />
                    </div>
                </ng-template>
                </p-select>
                
                
              </div>
              
            </div>

            <!-- <div class="w-full max-w-md">
              <div class="p-4 border-b flex items-center justify-between">
                <span class="text-gray-700 font-medium">Choose the legal form</span>
                <button
                  (click)="toggleDropdown()"
                  class="text-gray-500 hover:text-gray-700 focus:outline-none"
                >
                  <i class="pi {{ isDropdownOpen ? 'pi-chevron-up' : 'pi-chevron-down' }}"></i>
                </button>
              </div>
            
              @if (isDropdownOpen) {
                <div>
                  @for (option of legalFormOptions; track option.id) {
                    <div class="px-4 py-3 border-b flex items-center justify-between">
                      <span class="text-gray-700">{{ option.name }}</span>
                      <div class="flex items-center space-x-2">
                        <button
                          (click)="editOption(option)"
                          class="text-gray-500 hover:text-blue-500 focus:outline-none"
                        >
                          <i class="pi pi-pencil"></i>
                        </button>
                        <button
                          (click)="deleteOption(option.id)"
                          class="text-gray-500 hover:text-red-500 focus:outline-none"
                        >
                          <i class="pi pi-trash"></i>
                        </button>
                      </div>
                    </div>
                  }
            
                  <div class="px-4 py-3 flex items-center text-blue-500 hover:bg-blue-50 cursor-pointer">
                    <input
                      type="text"
                      [(ngModel)]="newOptionText"
                      placeholder="Add new legal form"
                      class="flex-grow bg-transparent focus:outline-none"
                      (keyup.enter)="addNewOption()"
                    />
                    <button
                      (click)="addNewOption()"
                      class="ml-2 text-blue-500 focus:outline-none"
                    >
                      <i class="pi pi-plus"></i>
                    </button>
                  </div>
                </div>
              }
            </div> -->

            <!-- Registration  Date  -->
            <div class="flex flex-col gap-3">
              <label class="text-gray-60 font-medium">
                {{
                  "VIEW_COMPANY.LEGAL_INFORMATION.REGISTRATION_DATE" | translate
                }}</label
              >

              <input
                type="date"
                pInputText
                class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                placeholder="Registration Date"
                required="true"
                formControlName="registration_date"
                [ngClass]="{
                  'border-red-500 focus:!border-red-500':
                    companyForm.get('legal_information.registration_date')
                      ?.invalid &&
                    companyForm.get('legal_information.registration_date')
                      ?.touched
                }"
              />
              <div class="flex items-center">
                <span
                  class="text-red-500 text-sm"
                  *ngIf="
                    companyForm.get('legal_information.registration_date')
                      ?.invalid &&
                    companyForm.get('legal_information.registration_date')
                      ?.touched
                  "
                >
                  <i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{
                    "ADD_EDIT_COMPANY.REGISTRATION_DATE_IS_REQUIRED" | translate
                  }}
                </span>
              </div>
            </div>

            <!-- Legal Status -->

            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.LEGAL_INFORMATION.LEGAL_STATUS" | translate
              }}</label>
              <div class="relative">
                <select
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400"
                  required
                  formControlName="legal_status"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('legal_information.legal_status')
                        ?.invalid &&
                      companyForm.get('legal_information.legal_status')?.touched
                  }"
                >
                  <option value="" selected disabled>Legal Status</option>
                  @for (status of legalStatusOptions; track $index) {

                  <option [value]="status.value">
                    {{ status.label }}
                  </option>
                  }
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"
                >
                  <i class="pi pi-chevron-down"></i>
                </div>
              </div>
              <div class="flex items-center">
                <span
                  class="text-red-500 text-sm"
                  *ngIf="
                    companyForm.get('legal_information.legal_status')
                      ?.invalid &&
                    companyForm.get('legal_information.legal_status')?.touched
                  "
                >
                  <i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{ "ADD_EDIT_COMPANY.LEGAL_STATUS_IS_REQUIRED" | translate }}
                </span>
              </div>
            </div>

            <!-- Sector -->

            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.LEGAL_INFORMATION.SECTOR" | translate
              }}</label>
              <div class="relative">
                <select
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400"
                  required="true"
                  formControlName="sector"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('legal_information.sector')?.invalid &&
                      companyForm.get('legal_information.sector')?.touched
                  }"
                >
                  <option value="" selected disabled>
                    {{
                      "ADD_EDIT_COMPANY.ENTER_THE_COMPANY_INDUSTRY" | translate
                    }}
                  </option>
                  @for (sector of sectorOptions; track $index) {

                  <option [value]="sector.value">
                    {{ sector.label }}
                  </option>

                  }
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"
                >
                  <i class="pi pi-chevron-down"></i>
                </div>
              </div>
              <div class="flex items-center">
                <span
                  class="text-red-500 text-sm"
                  *ngIf="
                    companyForm.get('legal_information.sector')?.invalid &&
                    companyForm.get('legal_information.sector')?.touched
                  "
                >
                  <i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{ "ADD_EDIT_COMPANY.SECTOR_IS_REQUIRED" | translate }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Address Information  -->
        <div class="rounded-lg">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12.5 6C11.7583 6 11.0333 6.21993 10.4166 6.63199C9.79993 7.04404 9.31928 7.62971 9.03545 8.31494C8.75162 9.00016 8.67736 9.75416 8.82205 10.4816C8.96675 11.209 9.3239 11.8772 9.84835 12.4017C10.3728 12.9261 11.041 13.2833 11.7684 13.4279C12.4958 13.5726 13.2498 13.4984 13.9351 13.2145C14.6203 12.9307 15.206 12.4501 15.618 11.8334C16.0301 11.2167 16.25 10.4917 16.25 9.75C16.25 8.75544 15.8549 7.80161 15.1517 7.09835C14.4484 6.39509 13.4946 6 12.5 6ZM12.5 12C12.055 12 11.62 11.868 11.25 11.6208C10.88 11.3736 10.5916 11.0222 10.4213 10.611C10.251 10.1999 10.2064 9.7475 10.2932 9.31105C10.38 8.87459 10.5943 8.47368 10.909 8.15901C11.2237 7.84434 11.6246 7.63005 12.061 7.54323C12.4975 7.45642 12.9499 7.50097 13.361 7.67127C13.7722 7.84157 14.1236 8.12996 14.3708 8.49997C14.618 8.86998 14.75 9.30499 14.75 9.75C14.75 10.3467 14.5129 10.919 14.091 11.341C13.669 11.7629 13.0967 12 12.5 12ZM12.5 1.5C10.3127 1.50248 8.21575 2.37247 6.66911 3.91911C5.12247 5.46575 4.25248 7.56273 4.25 9.75C4.25 12.6938 5.61031 15.8138 8.1875 18.7734C9.34552 20.1108 10.6489 21.3151 12.0734 22.3641C12.1995 22.4524 12.3498 22.4998 12.5037 22.4998C12.6577 22.4998 12.808 22.4524 12.9341 22.3641C14.356 21.3147 15.6568 20.1104 16.8125 18.7734C19.3859 15.8138 20.75 12.6938 20.75 9.75C20.7475 7.56273 19.8775 5.46575 18.3309 3.91911C16.7843 2.37247 14.6873 1.50248 12.5 1.5ZM12.5 20.8125C10.9503 19.5938 5.75 15.1172 5.75 9.75C5.75 7.95979 6.46116 6.2429 7.72703 4.97703C8.9929 3.71116 10.7098 3 12.5 3C14.2902 3 16.0071 3.71116 17.273 4.97703C18.5388 6.2429 19.25 7.95979 19.25 9.75C19.25 15.1153 14.0497 19.5938 12.5 20.8125Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.ADDRESS_INFORMATION.ADDRESS_INFORMATION"
                  | translate
              }}
            </h2>
          </div>

          <div class="grid md:grid-cols-2 grid-cols-1 md:gap-4 text-sm">
            <!-- Headquarters Selection -->
            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.ADDRESS_INFORMATION.HEADQUARTERS" | translate
              }}</label>
              <div class="flex justify-center">
                <input
                  type="text"
                  pInputText
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.controls['headquarters'].invalid &&
                      companyForm.controls['headquarters'].touched
                  }"
                  [placeholder]="
                    'ADD_EDIT_COMPANY.ENTER_THE_HEADQUARTERS' | translate
                  "
                  formControlName="headquarters"
                />
                <!-- <p-multiselect
                  variant="filled"
                  [options]="headquartersOptions"
                  formControlName="headquarters"
                  placeholder="Select Headquarters"
                  styleClass="w-full"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('headquarters')?.invalid &&
                      companyForm.get('headquarters')?.touched
                  }"
                /> -->
              </div>
              <div
                *ngIf="
                  companyForm.get('headquarters')?.invalid &&
                  companyForm.get('headquarters')?.touched
                "
                class="text-red-500 text-xs mt-1"
              >
                <span
                  *ngIf="companyForm.get('headquarters')?.errors?.['required']"
                  ><i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>
                  {{
                    "ADD_EDIT_COMPANY.HEADQUARTERS_IS_REQUIRED" | translate
                  }}</span
                >
              </div>
            </div>

            <!-- Branch Locations  -->
            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.ADDRESS_INFORMATION.BRANCH_LOCATIONS" | translate
              }}</label>

              <div class="relative">
                <select
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400"
                  required="true"
                  formControlName="branch_locations"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('branch_locations')?.invalid &&
                      companyForm.get('branch_locations')?.touched
                  }"
                >
                  <option value="" selected disabled>
                    {{
                      "ADD_EDIT_COMPANY.ENTER_THE_COMPANY_INDUSTRY" | translate
                    }}
                  </option>
                  @for (branch of branchLocations; track $index) {

                  <option [value]="branch.value">
                    {{ branch.value }}
                  </option>

                  }
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"
                >
                  <i class="pi pi-chevron-down"></i>
                </div>

                <!-- <input
                  type="text"
                  pInputText
                  class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.controls['branch_locations'].invalid &&
                      companyForm.controls['branch_locations'].touched
                  }"
                  placeholder="Enter the Branch Locations "
                  formControlName="branch_locations"
                /> -->
                <!-- <p-multiselect
                  variant="filled"
                  [options]="branchLocationsOptions"
                  formControlName="branch_locations"
                  placeholder="Branch Locations"
                  styleClass="w-full"
                  [disabled]="true"
                  [ngClass]="{
                    'border-red-500 focus:!border-red-500':
                      companyForm.get('branch_locations')?.invalid &&
                      companyForm.get('branch_locations')?.touched
                  }"
                /> -->
              </div>
              <div
                *ngIf="
                  companyForm.get('branch_locations')?.invalid &&
                  companyForm.get('branch_locations')?.touched
                "
                class="text-red-500 text-xs mt-1"
              >
                <span
                  *ngIf="companyForm.get('branch_locations')?.errors?.['required']"
                  ><i
                    class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                  ></i>

                  {{
                    "ADD_EDIT_COMPANY.BRANCH_LOCATIONS_IS_REQUIRED" | translate
                  }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Management Details  -->
        <div class="rounded-lg">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M20.75 4.5H4.25C4.05109 4.5 3.86032 4.57902 3.71967 4.71967C3.57902 4.86032 3.5 5.05109 3.5 5.25V19.5C3.5 19.8978 3.65804 20.2794 3.93934 20.5607C4.22064 20.842 4.60218 21 5 21H8.75C9.14782 21 9.52936 20.842 9.81066 20.5607C10.092 20.2794 10.25 19.8978 10.25 19.5V15H14.75V16.5C14.75 16.8978 14.908 17.2794 15.1893 17.5607C15.4706 17.842 15.8522 18 16.25 18H20C20.3978 18 20.7794 17.842 21.0607 17.5607C21.342 17.2794 21.5 16.8978 21.5 16.5V5.25C21.5 5.05109 21.421 4.86032 21.2803 4.71967C21.1397 4.57902 20.9489 4.5 20.75 4.5ZM8.75 19.5H5V12H8.75V19.5ZM8.75 10.5H5V6H8.75V10.5ZM14.75 13.5H10.25V6H14.75V13.5ZM20 16.5H16.25V12H20V16.5ZM20 10.5H16.25V6H20V10.5Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.MANAGEMENT_DETAILS.MANAGEMENT_DETAILS" | translate
              }}
            </h2>
          </div>

          <div formArrayName="directors">
            <div
              *ngFor="let director of directors.controls; let i = index"
              [formGroupName]="i"
            >
              <div class="flex items-center gap-4 mb-3">
                <div
                  class="grid md:grid-cols-2 grid-cols-1 md:gap-4 text-sm flex-grow"
                >
                  <div class="flex flex-col gap-3">
                    <label class="text-gray-600 font-medium">{{
                      "VIEW_COMPANY.MANAGEMENT_DETAILS.DIRECTORS" | translate
                    }}</label>
                    <input
                      type="text"
                      pInputText
                      class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                      [placeholder]="
                        'ADD_EDIT_COMPANY.ENTER_THE_DIRECTORS_NAME' | translate
                      "
                      required="true"
                      formControlName="name"
                      [ngClass]="{
                        'border-red-500 focus:!border-red-500':
                          director.get('name')?.invalid &&
                          director.get('name')?.touched
                      }"
                    />
                    <div class="flex items-center">
                      <span
                        class="text-red-500 text-sm"
                        *ngIf="
                          director.get('name')?.invalid &&
                          director.get('name')?.touched
                        "
                      >
                        <i
                          class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                        ></i>
                        {{"ADD_EDIT_COMPANY.DIRECTOR_NAME_IS_REQUIRED" | translate}}
                      </span>
                    </div>
                  </div>

                  <!-- Role  -->
                  <div class="flex flex-col gap-3">
                    <label class="text-gray-600 font-medium">Role</label>
                    <input
                      type="text"
                      pInputText
                      class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                      [placeholder]="
                        'ADD_EDIT_COMPANY.ENTER_THE_DIRECTORS_ROLE' | translate
                      "
                      required="true"
                      formControlName="role"
                      [ngClass]="{
                        'border-red-500 focus:!border-red-500':
                          director.get('role')?.invalid &&
                          director.get('role')?.touched
                      }"
                    />
                    <div class="flex items-center">
                      <span
                        class="text-red-500 text-sm"
                        *ngIf="
                          director.get('role')?.invalid &&
                          director.get('role')?.touched
                        "
                      >
                        <i
                          class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                        ></i>
                        {{"ADD_EDIT_COMPANY.DIRECTOR_ROLE_IS_REQUIRED" | translate}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Authorized Signatories -->
              <div>
                <div
                  class="grid md:grid-cols grid-cols-1 md:gap-4 text-sm flex-grow"
                >
                  <div class="flex flex-col gap-3">
                    <label class="text-gray-600 font-medium">{{
                      "VIEW_COMPANY.MANAGEMENT_DETAILS.SIGNATORIES" | translate
                    }}</label>
                    <input
                      type="text"
                      pInputText
                      class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                      placeholder="{{'ADD_EDIT_COMPANY.ENTER_AUTHORIZED_PERSONS' | translate}}"
                      required="true"
                      formControlName="signature"
                      [ngClass]="{
                        'border-red-500 focus:!border-red-500':
                          director.get('signature')?.invalid &&
                          director.get('signature')?.touched
                      }"
                    />
                    <div class="flex items-center">
                      <span
                        class="text-red-500 text-sm"
                        *ngIf="
                          director.get('signature')?.invalid &&
                          director.get('signature')?.touched
                        "
                      >
                        <i
                          class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                        ></i>
                        {{"ADD_EDIT_COMPANY.AUTHORIZED_SIGNATORIES_IS_REQUIRED" | translate}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Activities in the field of sustainability -->
        <div class="rounded-lg" formGroupName="activity">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M22.7806 13.2812L19.7806 16.2812C19.6399 16.4219 19.449 16.501 19.25 16.501C19.051 16.501 18.8601 16.4219 18.7194 16.2812C18.5786 16.1405 18.4996 15.9496 18.4996 15.7506C18.4996 15.5516 18.5786 15.3607 18.7194 15.22L20.4397 13.5006H12.0603L6.81031 18.7506H9.5C9.69891 18.7506 9.88968 18.8296 10.0303 18.9703C10.171 19.1109 10.25 19.3017 10.25 19.5006C10.25 19.6995 10.171 19.8903 10.0303 20.0309C9.88968 20.1716 9.69891 20.2506 9.5 20.2506H5C4.80109 20.2506 4.61032 20.1716 4.46967 20.0309C4.32902 19.8903 4.25 19.6995 4.25 19.5006V15.0006C4.25 14.8017 4.32902 14.6109 4.46967 14.4703C4.61032 14.3296 4.80109 14.2506 5 14.2506C5.19891 14.2506 5.38968 14.3296 5.53033 14.4703C5.67098 14.6109 5.75 14.8017 5.75 15.0006V17.6903L11 12.4403V4.0609L9.28063 5.78122C9.13989 5.92195 8.94902 6.00101 8.75 6.00101C8.55098 6.00101 8.36011 5.92195 8.21937 5.78122C8.07864 5.64048 7.99958 5.44961 7.99958 5.25059C7.99958 5.05157 8.07864 4.8607 8.21937 4.71996L11.2194 1.71997C11.289 1.65023 11.3717 1.59491 11.4628 1.55717C11.5538 1.51943 11.6514 1.5 11.75 1.5C11.8486 1.5 11.9462 1.51943 12.0372 1.55717C12.1283 1.59491 12.211 1.65023 12.2806 1.71997L15.2806 4.71996C15.4214 4.8607 15.5004 5.05157 15.5004 5.25059C15.5004 5.44961 15.4214 5.64048 15.2806 5.78122C15.1399 5.92195 14.949 6.00101 14.75 6.00101C14.551 6.00101 14.3601 5.92195 14.2194 5.78122L12.5 4.0609V12.0006H20.4397L18.7194 10.2812C18.5786 10.1405 18.4996 9.94961 18.4996 9.75059C18.4996 9.55157 18.5786 9.3607 18.7194 9.21996C18.8601 9.07923 19.051 9.00017 19.25 9.00017C19.449 9.00017 19.6399 9.07923 19.7806 9.21996L22.7806 12.22C22.8504 12.2896 22.9057 12.3723 22.9434 12.4634C22.9812 12.5544 23.0006 12.652 23.0006 12.7506C23.0006 12.8492 22.9812 12.9467 22.9434 13.0378C22.9057 13.1288 22.8504 13.2116 22.7806 13.2812Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.ACTIVITIES_IN_THE_FIELD_OF_SUSTAINABILITY.ACTIVITIES_IN_THE_FIELD_OF_SUSTAINABILITY"
                  | translate
              }}
            </h2>
          </div>

          <div>
            <div class="flex items-center gap-4 mb-3">
              <div
                class="grid md:grid-cols-2 grid-cols-1 md:gap-4 text-sm flex-grow"
              >
                <div class="flex flex-col gap-3">
                  <label class="text-gray-600 font-medium">
                    {{
                      "VIEW_COMPANY.ACTIVITIES_IN_THE_FIELD_OF_SUSTAINABILITY.PROJECT_ACTIVITY"
                        | translate
                    }}</label
                  >
                  <input
                    type="text"
                    pInputText
                    class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                    [placeholder]="'ADD_EDIT_COMPANY.PROJECT_NAME' | translate"
                    required="true"
                    formControlName="project_name"
                    [ngClass]="{
                      'border-red-500 focus:!border-red-500':
                        companyForm.get('activity.project_name')?.invalid &&
                        companyForm.get('activity.project_name')?.touched
                    }"
                  />
                  <div class="flex items-center">
                    <span
                      class="text-red-500 text-sm"
                      *ngIf="
                        companyForm.get('activity.project_name')?.invalid &&
                        companyForm.get('activity.project_name')?.touched
                      "
                    >
                      <i
                        class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                      ></i>
                      {{
                        "ADD_EDIT_COMPANY.PROJECT_NAME_IS_REQUIRED" | translate
                      }}
                    </span>
                  </div>
                </div>
                <div class="flex flex-col gap-3">
                  <label class="text-gray-600 font-medium">{{
                    "ADD_EDIT_COMPANY.LOCATION" | translate
                  }}</label>
                  <input
                    type="text"
                    pInputText
                    class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                    [placeholder]="
                      'ADD_EDIT_COMPANY.ENTER_LOCATION' | translate
                    "
                    required="true"
                    formControlName="location"
                    [ngClass]="{
                      'border-red-500 focus:!border-red-500':
                        companyForm.get('activity.location')?.invalid &&
                        companyForm.get('activity.location')?.touched
                    }"
                  />
                  <div class="flex items-center">
                    <span
                      class="text-red-500 text-sm"
                      *ngIf="
                        companyForm.get('activity.location')?.invalid &&
                        companyForm.get('activity.location')?.touched
                      "
                    >
                      <i
                        class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                      ></i>
                      {{
                        "ADD_EDIT_COMPANY.PROJECT_LOCATION_IS_REQUIRED"
                          | translate
                      }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div class="flex items-center gap-4 mb-3">
                <div
                  class="grid md:grid-cols grid-cols-1 md:gap-4 text-sm flex-grow"
                >
                  <div class="flex flex-col gap-3">
                    <label class="text-gray-600 font-medium">{{
                      "VIEW_COMPANY.ACTIVITIES_IN_THE_FIELD_OF_SUSTAINABILITY.DETAILS"
                        | translate
                    }}</label>
                    <input
                      type="text"
                      pInputText
                      class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                      [placeholder]="
                        'ADD_EDIT_COMPANY.DETAILS_ABOUT_THE_PROJECT' | translate
                      "
                      required="true"
                      formControlName="details"
                      [ngClass]="{
                        'border-red-500 focus:!border-red-500':
                          companyForm.get('activity.details')?.invalid &&
                          companyForm.get('activity.details')?.touched
                      }"
                    />
                    <div class="flex items-center">
                      <span
                        class="text-red-500 text-sm"
                        *ngIf="
                          companyForm.get('activity.details')?.invalid &&
                          companyForm.get('activity.details')?.touched
                        "
                      >
                        <i
                          class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                        ></i>
                        {{
                          "ADD_EDIT_COMPANY.PROJECT_DETAILS_IS_REQUIRED"
                            | translate
                        }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Financial Information  -->
        <div class="rounded-lg" formGroupName="financial_information">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2.75 9.74953H5V15.7495H3.5C3.30109 15.7495 3.11032 15.8286 2.96967 15.9692C2.82902 16.1099 2.75 16.3006 2.75 16.4995C2.75 16.6984 2.82902 16.8892 2.96967 17.0299C3.11032 17.1705 3.30109 17.2495 3.5 17.2495H21.5C21.6989 17.2495 21.8897 17.1705 22.0303 17.0299C22.171 16.8892 22.25 16.6984 22.25 16.4995C22.25 16.3006 22.171 16.1099 22.0303 15.9692C21.8897 15.8286 21.6989 15.7495 21.5 15.7495H20V9.74953H22.25C22.4132 9.74937 22.5719 9.69599 22.702 9.59748C22.8321 9.49898 22.9265 9.36073 22.9709 9.20371C23.0153 9.04669 23.0073 8.87946 22.9481 8.7274C22.8889 8.57533 22.7817 8.44673 22.6428 8.3611L12.8928 2.3611C12.7747 2.28846 12.6387 2.25 12.5 2.25C12.3613 2.25 12.2253 2.28846 12.1072 2.3611L2.35719 8.3611C2.21828 8.44673 2.11108 8.57533 2.05187 8.7274C1.99266 8.87946 1.98466 9.04669 2.02908 9.20371C2.07351 9.36073 2.16793 9.49898 2.29803 9.59748C2.42814 9.69599 2.58681 9.74937 2.75 9.74953ZM6.5 9.74953H9.5V15.7495H6.5V9.74953ZM14 9.74953V15.7495H11V9.74953H14ZM18.5 15.7495H15.5V9.74953H18.5V15.7495ZM12.5 3.87985L19.6006 8.24953H5.39937L12.5 3.87985ZM23.75 19.4995C23.75 19.6984 23.671 19.8892 23.5303 20.0299C23.3897 20.1705 23.1989 20.2495 23 20.2495H2C1.80109 20.2495 1.61032 20.1705 1.46967 20.0299C1.32902 19.8892 1.25 19.6984 1.25 19.4995C1.25 19.3006 1.32902 19.1099 1.46967 18.9692C1.61032 18.8286 1.80109 18.7495 2 18.7495H23C23.1989 18.7495 23.3897 18.8286 23.5303 18.9692C23.671 19.1099 23.75 19.3006 23.75 19.4995Z"
                fill="black"
              />
            </svg>
            <h2 class="font-medium">
              {{
                "VIEW_COMPANY.FINANCIAL_INFORMATION.FINANCIAL_INFORMATION"
                  | translate
              }}
            </h2>
          </div>

          <div>
            <div class="flex items-center gap-4 mb-3">
              <div
                class="grid md:grid-cols-2 grid-cols-1 md:gap-4 text-sm flex-grow"
              >
                <div class="flex flex-col gap-3">
                  <label class="text-gray-600 font-medium">{{
                    "VIEW_COMPANY.FINANCIAL_INFORMATION.SHARE_CAPITAL_EQUITY"
                      | translate
                  }}</label>
                  <input
                    type="number"
                    pInputText
                    class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
                    [placeholder]="
                      'ADD_EDIT_COMPANY.ENTER_THE_TOTAL_SHARE_CAPITAL_OR_EQUITY'
                        | translate
                    "
                    required="true"
                    formControlName="company_capital"
                    [ngClass]="{
                      'border-red-500 focus:!border-red-500':
                        companyForm.get('financial_information.company_capital')
                          ?.invalid &&
                        companyForm.get('financial_information.company_capital')
                          ?.touched
                    }"
                  />
                  <div class="flex items-center">
                    <span
                      class="text-red-500 text-sm"
                      *ngIf="
                        companyForm.get('financial_information.company_capital')
                          ?.invalid &&
                        companyForm.get('financial_information.company_capital')
                          ?.touched
                      "
                    >
                      <i
                        class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                      ></i>

                      {{
                        "ADD_EDIT_COMPANY.COMPANY_CAPITAL_IS_REQUIRED"
                          | translate
                      }}
                    </span>
                  </div>
                </div>
                <!-- Type of capital -->
                <div class="flex flex-col gap-3">
                  <label class="text-gray-600 font-medium">{{
                    "VIEW_COMPANY.FINANCIAL_INFORMATION.TYPE_OF_CAPITAL"
                      | translate
                  }}</label>
                  <div class="relative">
                    <select
                      class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none appearance-none bg-white text-gray-400"
                      required="true"
                      formControlName="type_of_capital"
                      [ngClass]="{
                        'border-red-500 focus:!border-red-500':
                          companyForm.get(
                            'financial_information.type_of_capital'
                          )?.invalid &&
                          companyForm.get(
                            'financial_information.type_of_capital'
                          )?.touched
                      }"
                    >
                      <option value="" selected disabled>
                        {{ "ADD_EDIT_COMPANY.AUTHORIZED_CAPITAL" | translate }}
                      </option>

                      @for (type of typeOfCapitalOptions; track $index) {
                      <option value="{{ type.value }}">{{ type.label }}</option>
                      }
                    </select>
                    <div
                      class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400"
                    >
                      <i class="pi pi-chevron-down"></i>
                    </div>
                  </div>
                  <div class="flex items-center">
                    <span
                      class="text-red-500 text-sm"
                      *ngIf="
                        companyForm.get('financial_information.type_of_capital')
                          ?.invalid &&
                        companyForm.get('financial_information.type_of_capital')
                          ?.touched
                      "
                    >
                      <i
                        class="pi pi-exclamation-circle text-red-500 mr-1 ml-1"
                      ></i>
                      {{
                        "ADD_EDIT_COMPANY.TYPE_OF_CAPITAL_IS_REQUIRED"
                          | translate
                      }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Financial Reports  -->
        <div class="rounded-lg">
          <div
            class="flex items-center gap-3 text-gray-900 bg-primary bg-opacity-10 p-3 mb-4"
          >
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M20.5306 7.71938L15.2806 2.46938C15.2109 2.39975 15.1282 2.34454 15.0371 2.3069C14.9461 2.26926 14.8485 2.24992 14.75 2.25H5.75C5.35218 2.25 4.97064 2.40804 4.68934 2.68934C4.40804 2.97064 4.25 3.35218 4.25 3.75V20.25C4.25 20.6478 4.40804 21.0294 4.68934 21.3107C4.97064 21.592 5.35218 21.75 5.75 21.75H19.25C19.6478 21.75 20.0294 21.592 20.3107 21.3107C20.592 21.0294 20.75 20.6478 20.75 20.25V8.25C20.7501 8.15148 20.7307 8.05391 20.6931 7.96286C20.6555 7.87182 20.6003 7.78908 20.5306 7.71938ZM15.5 4.81031L18.1897 7.5H15.5V4.81031ZM19.25 20.25H5.75V3.75H14V8.25C14 8.44891 14.079 8.63968 14.2197 8.78033C14.3603 8.92098 14.5511 9 14.75 9H19.25V20.25Z"
                fill="black"
              />
            </svg>

            <h2 class="font-medium">
              {{ "ADD_EDIT_COMPANY.FINANCIAL_REPORTS" | translate }}
            </h2>
          </div>

          <div
            class="grid md:grid-cols-1 grid-cols-1 md:gap-4 text-sm flex-grow"
          >
            <div class="flex flex-col gap-3">
              <label class="text-gray-600 font-medium">{{
                "VIEW_COMPANY.FINANCIAL_INFORMATION.SHARE_CAPITAL_EQUITY"
                  | translate
              }}</label>

              <!-- Drag & Drop Zone -->
              <div
                class="p-6 border-2 border-dashed border-gray-300 rounded-lg bg-white flex flex-col items-center text-center space-y-3"
                (dragover)="onDragOver($event)"
                (dragleave)="onDragLeave($event)"
                (drop)="onDrop($event)"
              >
                <svg
                  width="24"
                  height="25"
                  viewBox="0 0 24 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M16.7193 16.0306L14.9999 14.3103V20C14.9999 20.1989 14.9209 20.3897 14.7802 20.5303C14.6396 20.671 14.4488 20.75 14.2499 20.75C14.051 20.75 13.8602 20.671 13.7196 20.5303C13.5789 20.3897 13.4999 20.1989 13.4999 20V14.3103L11.7805 16.0306C11.7109 16.1003 11.6281 16.1556 11.5371 16.1933C11.446 16.231 11.3485 16.2504 11.2499 16.2504C11.1514 16.2504 11.0538 16.231 10.9627 16.1933C10.8717 16.1556 10.789 16.1003 10.7193 16.0306C10.6496 15.9609 10.5943 15.8782 10.5566 15.7872C10.5189 15.6961 10.4995 15.5985 10.4995 15.5C10.4995 15.4015 10.5189 15.3039 10.5566 15.2128C10.5943 15.1218 10.6496 15.0391 10.7193 14.9694L13.7193 11.9694C13.7889 11.8996 13.8717 11.8443 13.9627 11.8066C14.0538 11.7688 14.1514 11.7494 14.2499 11.7494C14.3485 11.7494 14.4461 11.7688 14.5371 11.8066C14.6282 11.8443 14.7109 11.8996 14.7805 11.9694L17.7805 14.9694C17.8502 15.0391 17.9055 15.1218 17.9432 15.2128C17.9809 15.3039 18.0003 15.4015 18.0003 15.5C18.0003 15.5985 17.9809 15.6961 17.9432 15.7872C17.9055 15.8782 17.8502 15.9609 17.7805 16.0306C17.7109 16.1003 17.6281 16.1556 17.5371 16.1933C17.446 16.231 17.3485 16.2504 17.2499 16.2504C17.1514 16.2504 17.0538 16.231 16.9627 16.1933C16.8717 16.1556 16.789 16.1003 16.7193 16.0306ZM14.9999 4.25C13.4676 4.25116 11.9659 4.67864 10.6627 5.48463C9.3595 6.29061 8.30628 7.44331 7.62085 8.81375C6.80478 8.69383 5.97275 8.74346 5.17672 8.95954C4.38069 9.17563 3.63776 9.55352 2.99434 10.0696C2.35091 10.5857 1.82081 11.2289 1.43714 11.9591C1.05347 12.6893 0.824469 13.4907 0.764444 14.3134C0.704419 15.136 0.814657 15.9622 1.08827 16.7403C1.36189 17.5185 1.79301 18.2318 2.3547 18.8359C2.91639 19.4399 3.5966 19.9216 4.35283 20.251C5.10906 20.5803 5.92508 20.7502 6.74991 20.75H10.4999C10.6988 20.75 10.8896 20.671 11.0302 20.5303C11.1709 20.3897 11.2499 20.1989 11.2499 20C11.2499 19.8011 11.1709 19.6103 11.0302 19.4697C10.8896 19.329 10.6988 19.25 10.4999 19.25H6.74991C5.55644 19.25 4.41185 18.7759 3.56793 17.932C2.72402 17.0881 2.24991 15.9435 2.24991 14.75C2.24991 13.5565 2.72402 12.4119 3.56793 11.568C4.41185 10.7241 5.55644 10.25 6.74991 10.25C6.85304 10.25 6.95616 10.25 7.05835 10.2613C6.85333 10.9898 6.74955 11.7431 6.74991 12.5C6.74991 12.6989 6.82893 12.8897 6.96958 13.0303C7.11024 13.171 7.301 13.25 7.49991 13.25C7.69883 13.25 7.88959 13.171 8.03024 13.0303C8.1709 12.8897 8.24991 12.6989 8.24991 12.5C8.2501 11.2831 8.57926 10.0889 9.20256 9.04369C9.82586 7.99852 10.7201 7.14129 11.7907 6.56272C12.8613 5.98415 14.0683 5.70576 15.2842 5.75701C16.5 5.80826 17.6794 6.18724 18.6975 6.85385C19.7156 7.52046 20.5345 8.44989 21.0676 9.54381C21.6008 10.6377 21.8283 11.8554 21.7261 13.068C21.6238 14.2806 21.1957 15.4431 20.487 16.4323C19.7782 17.4215 18.8152 18.2007 17.6999 18.6875C17.5415 18.7562 17.4117 18.8773 17.3323 19.0306C17.2529 19.1839 17.2288 19.3598 17.264 19.5288C17.2993 19.6978 17.3917 19.8494 17.5258 19.9581C17.6598 20.0669 17.8273 20.126 17.9999 20.1256C18.1033 20.1255 18.2055 20.1038 18.2999 20.0619C20.0374 19.304 21.4609 17.9708 22.331 16.2867C23.2011 14.6025 23.4646 12.6701 23.0773 10.8145C22.6901 8.95888 21.6756 7.29322 20.2045 6.09768C18.7334 4.90215 16.8955 4.24967 14.9999 4.25Z"
                    fill="black"
                  />
                </svg>

                <p class="text-gray-600 text-sm">
                  {{
                    "ADD_EDIT_COMPANY.BROWSE_AND_CHOOSE_ONE_OR_MULTIPLE_DOCUMENTS"
                      | translate
                  }}
                </p>
                <button
                  (click)="fileInput.click()"
                  class="bg-teal-700 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-md"
                >
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M12 4v16m8-8H4"
                    ></path>
                  </svg>
                </button>
                <input
                  #fileInput
                  type="file"
                  multiple
                  class="hidden"
                  formControlName="financial_report"
                  (change)="onFileSelected($event)"
                />
              </div>

              <!-- File List -->
              <div *ngIf="uploadedFiles.length > 0" class="mt-4 space-y-2">
                <div
                  *ngFor="let file of uploadedFiles; let i = index"
                  class="flex items-center justify-between p-3 border rounded-lg bg-white"
                >
                  <div class="flex items-center space-x-2">
                    <svg
                      width="25"
                      height="24"
                      viewBox="0 0 25 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M20.5306 7.71938L15.2806 2.46938C15.2109 2.39975 15.1282 2.34454 15.0371 2.3069C14.9461 2.26926 14.8485 2.24992 14.75 2.25H5.75C5.35218 2.25 4.97064 2.40804 4.68934 2.68934C4.40804 2.97064 4.25 3.35218 4.25 3.75V20.25C4.25 20.6478 4.40804 21.0294 4.68934 21.3107C4.97064 21.592 5.35218 21.75 5.75 21.75H19.25C19.6478 21.75 20.0294 21.592 20.3107 21.3107C20.592 21.0294 20.75 20.6478 20.75 20.25V8.25C20.7501 8.15148 20.7307 8.05391 20.6931 7.96286C20.6555 7.87182 20.6003 7.78908 20.5306 7.71938ZM15.5 4.81031L18.1897 7.5H15.5V4.81031ZM19.25 20.25H5.75V3.75H14V8.25C14 8.44891 14.079 8.63968 14.2197 8.78033C14.3603 8.92098 14.5511 9 14.75 9H19.25V20.25Z"
                        fill="#085E5A"
                      />
                    </svg>

                    <span class="text-sm text-gray-700">{{ file.name }}</span>
                  </div>
                  <div class="flex space-x-2">
                    <button
                      (click)="previewFile(file)"
                      class="text-gray-500 hover:text-teal-700"
                    >
                      <svg
                        width="25"
                        height="24"
                        viewBox="0 0 25 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M23.6853 11.6962C23.6525 11.6222 22.8584 9.86062 21.0931 8.09531C18.7409 5.74312 15.77 4.5 12.5 4.5C9.22999 4.5 6.25905 5.74312 3.90687 8.09531C2.14155 9.86062 1.34374 11.625 1.31468 11.6962C1.27203 11.7922 1.25 11.896 1.25 12.0009C1.25 12.1059 1.27203 12.2097 1.31468 12.3056C1.34749 12.3797 2.14155 14.1403 3.90687 15.9056C6.25905 18.2569 9.22999 19.5 12.5 19.5C15.77 19.5 18.7409 18.2569 21.0931 15.9056C22.8584 14.1403 23.6525 12.3797 23.6853 12.3056C23.7279 12.2097 23.75 12.1059 23.75 12.0009C23.75 11.896 23.7279 11.7922 23.6853 11.6962ZM12.5 18C9.61437 18 7.09343 16.9509 5.00655 14.8828C4.15028 14.0313 3.42179 13.0603 2.84374 12C3.42164 10.9396 4.15014 9.9686 5.00655 9.11719C7.09343 7.04906 9.61437 6 12.5 6C15.3856 6 17.9066 7.04906 19.9934 9.11719C20.8514 9.9684 21.5815 10.9394 22.1609 12C21.485 13.2619 18.5403 18 12.5 18ZM12.5 7.5C11.61 7.5 10.7399 7.76392 9.99993 8.25839C9.2599 8.75285 8.68313 9.45566 8.34253 10.2779C8.00194 11.1002 7.91282 12.005 8.08646 12.8779C8.26009 13.7508 8.68867 14.5526 9.31801 15.182C9.94735 15.8113 10.7492 16.2399 11.6221 16.4135C12.495 16.5872 13.3998 16.4981 14.2221 16.1575C15.0443 15.8169 15.7471 15.2401 16.2416 14.5001C16.7361 13.76 17 12.89 17 12C16.9988 10.8069 16.5242 9.66303 15.6806 8.81939C14.837 7.97575 13.6931 7.50124 12.5 7.5ZM12.5 15C11.9066 15 11.3266 14.8241 10.8333 14.4944C10.3399 14.1648 9.95542 13.6962 9.72835 13.1481C9.50129 12.5999 9.44188 11.9967 9.55764 11.4147C9.67339 10.8328 9.95911 10.2982 10.3787 9.87868C10.7982 9.45912 11.3328 9.1734 11.9147 9.05764C12.4967 8.94189 13.0999 9.0013 13.648 9.22836C14.1962 9.45542 14.6648 9.83994 14.9944 10.3333C15.324 10.8266 15.5 11.4067 15.5 12C15.5 12.7956 15.1839 13.5587 14.6213 14.1213C14.0587 14.6839 13.2956 15 12.5 15Z"
                          fill="#085E5A"
                        />
                      </svg>
                    </button>
                    <button
                      (click)="removeFile(i)"
                      class="text-red-500 hover:text-red-700"
                    >
                      <svg
                        width="25"
                        height="24"
                        viewBox="0 0 25 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M20.75 4.5H17V3.75C17 3.15326 16.7629 2.58097 16.341 2.15901C15.919 1.73705 15.3467 1.5 14.75 1.5H10.25C9.65326 1.5 9.08097 1.73705 8.65901 2.15901C8.23705 2.58097 8 3.15326 8 3.75V4.5H4.25C4.05109 4.5 3.86032 4.57902 3.71967 4.71967C3.57902 4.86032 3.5 5.05109 3.5 5.25C3.5 5.44891 3.57902 5.63968 3.71967 5.78033C3.86032 5.92098 4.05109 6 4.25 6H5V19.5C5 19.8978 5.15804 20.2794 5.43934 20.5607C5.72064 20.842 6.10218 21 6.5 21H18.5C18.8978 21 19.2794 20.842 19.5607 20.5607C19.842 20.2794 20 19.8978 20 19.5V6H20.75C20.9489 6 21.1397 5.92098 21.2803 5.78033C21.421 5.63968 21.5 5.44891 21.5 5.25C21.5 5.05109 21.421 4.86032 21.2803 4.71967C21.1397 4.57902 20.9489 4.5 20.75 4.5ZM9.5 3.75C9.5 3.55109 9.57902 3.36032 9.71967 3.21967C9.86032 3.07902 10.0511 3 10.25 3H14.75C14.9489 3 15.1397 3.07902 15.2803 3.21967C15.421 3.36032 15.5 3.55109 15.5 3.75V4.5H9.5V3.75ZM18.5 19.5H6.5V6H18.5V19.5ZM11 9.75V15.75C11 15.9489 10.921 16.1397 10.7803 16.2803C10.6397 16.421 10.4489 16.5 10.25 16.5C10.0511 16.5 9.86032 16.421 9.71967 16.2803C9.57902 16.1397 9.5 15.9489 9.5 15.75V9.75C9.5 9.55109 9.57902 9.36032 9.71967 9.21967C9.86032 9.07902 10.0511 9 10.25 9C10.4489 9 10.6397 9.07902 10.7803 9.21967C10.921 9.36032 11 9.55109 11 9.75ZM15.5 9.75V15.75C15.5 15.9489 15.421 16.1397 15.2803 16.2803C15.1397 16.421 14.9489 16.5 14.75 16.5C14.5511 16.5 14.3603 16.421 14.2197 16.2803C14.079 16.1397 14 15.9489 14 15.75V9.75C14 9.55109 14.079 9.36032 14.2197 9.21967C14.3603 9.07902 14.5511 9 14.75 9C14.9489 9 15.1397 9.07902 15.2803 9.21967C15.421 9.36032 15.5 9.55109 15.5 9.75Z"
                          fill="#085E5A"
                        />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Success Message -->
              <div
                *ngIf="uploadSuccess"
                class="mt-4 p-3 border rounded-lg bg-teal-100 text-teal-700 flex justify-between items-center"
              >
                <div class="flex items-center space-x-2">
                  <svg
                    width="16"
                    height="20"
                    viewBox="0 0 16 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M6.89131 12.5789V15.4778C6.89131 15.7365 6.97896 15.9535 7.15426 16.1288C7.32957 16.3041 7.54626 16.3915 7.80435 16.3909C8.06305 16.3909 8.28005 16.3032 8.45535 16.1279C8.63065 15.9526 8.718 15.7359 8.71739 15.4778V12.5789L9.53913 13.4007C9.63044 13.492 9.73331 13.5604 9.84774 13.6061C9.96218 13.6518 10.0763 13.6709 10.1901 13.6636C10.304 13.6557 10.4141 13.6289 10.5207 13.5833C10.6272 13.5376 10.7261 13.4691 10.8174 13.3778C10.9848 13.1952 11.0724 12.9822 11.0803 12.7387C11.0883 12.4952 11.0006 12.2822 10.8174 12.0996L8.44348 9.72566C8.35218 9.63436 8.25326 9.56984 8.14674 9.5321C8.04022 9.49436 7.92609 9.47519 7.80435 9.47458C7.68261 9.47458 7.56848 9.49375 7.46196 9.5321C7.35544 9.57045 7.25652 9.63497 7.16522 9.72566L4.79131 12.0996C4.6087 12.2822 4.52135 12.4952 4.52926 12.7387C4.53718 12.9822 4.63213 13.1952 4.81413 13.3778C4.99674 13.5452 5.20978 13.6329 5.45326 13.6408C5.69674 13.6487 5.90978 13.5611 6.09239 13.3778L6.89131 12.5789ZM2.32609 19.13C1.82391 19.13 1.39387 18.9511 1.03596 18.5931C0.678045 18.2352 0.499393 17.8055 0.500002 17.3039V2.69523C0.500002 2.19306 0.678958 1.76301 1.03687 1.4051C1.39478 1.04719 1.82452 0.868533 2.32609 0.869142H8.87718C9.12065 0.869142 9.35287 0.914794 9.57383 1.0061C9.79478 1.0974 9.98865 1.22675 10.1554 1.39414L14.5837 5.8224C14.7511 5.98979 14.8804 6.18397 14.9717 6.40492C15.063 6.62588 15.1087 6.85779 15.1087 7.10066V17.3039C15.1087 17.8061 14.9297 18.2361 14.5718 18.5941C14.2139 18.952 13.7842 19.1306 13.2826 19.13H2.32609ZM8.71739 6.3474C8.71739 6.6061 8.80505 6.8231 8.98035 6.9984C9.15565 7.17371 9.37235 7.26106 9.63044 7.26045H13.2826L8.71739 2.69523V6.3474Z"
                      fill="#085E5A"
                    />
                  </svg>

                  <span>{{
                    "ADD_EDIT_COMPANY.FILE_UPLOADED_SUCCESSFULLY" | translate
                  }}</span>
                </div>
                <button
                  (click)="uploadSuccess = false"
                  class="text-teal-700 hover:text-teal-900"
                >
                  ✕
                </button>
              </div>
            </div>
            <!-- Legal Form  -->
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-4 mt-6 justify-center">
      <p-button
        [label]="
          (formType === 'Edit'
            ? 'ADD_EDIT_COMPANY.UPDATE_COMPANY'
            : 'ADD_EDIT_COMPANY.ADD_NEW_COMPANY'
          ) | translate
        "
        (click)="onSubmit()"
        [disabled]="companyForm.invalid"
      />
      <p-button
        [label]="'ADD_EDIT_COMPANY.CANCEL' | translate"
        severity="secondary"
        (click)="onHide()"
      />
    </div>
  </form>
</p-dialog>

<p-dialog 
  [(visible)]="dialogVisible"  [style]="{ width: '25rem' }"
  [header]="currentAction === 'add' ? 'Add Legal Form' : 'Edit Legal Form'"
  [modal]="true">
  <form (ngSubmit)="saveForm()">
    <!-- Add your form fields here -->
    <input [(ngModel)]="currentForm.name" name="name" pInputText placeholder="Name"
    class="w-full px-3 py-2 !border-0 !border-b-2 border-gray-300 focus:outline-none rounded-none focus:!border-b-2 focus:!border-teal-600 shadow-none"
    >
    <!-- Add more fields as needed -->
    <!-- <div class="flex justify-end mt-4">
      <p-button type="submit" label="Save" severity="primary" />
    </div> -->
    <div class="flex justify-end gap-2  mt-4">
      <p-button label="Cancel" severity="secondary"size="small" (click)="dialogVisible = false" />
      <p-button type="submit" label="Save" severity="primary" size="small" />
  </div>
  </form>
</p-dialog>

<!-- Confirmation Dialog -->
<p-confirmDialog 

/>
